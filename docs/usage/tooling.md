# Tooling Intergration

Zap supports the ability to output a lua file that can deseralise compressed data so that it can be read by plugins and/or scripts such as [PacketProfiler](https://github.com/Pyseph/PacketProfiler/).

Zap and PacketProfiler have created a common format for this interfacing as detailed below:

## Tooling Format - Parameters

To deseralise this data, the function generated by Zap has the following parameters:

- The remote instance itself (`RemoteEvent | UnreliableRemoteEvent`)
- ALL arguments sent through the remote

An example is below:

::: danger
It is not intended behavior for you to run side effects if you deserialise the data yourself.
:::


<CodeBlock lang="lua" :code="example1" />

## Tooling Format - Returns

The function then returns an array in this format:

Lua:
<CodeBlock lang="lua" :code="returnsLua" />

TS:
<CodeBlock lang="typescript" :code="returnsTS" />

If the [`tooling_show_internal_data`](../config/options.md#tooling-show-internal-data) argument is `true`, then the first argument is of the type (although this type will respect your casing option):

Lua:
<CodeBlock lang="lua" :code="internalDataLua" />

TS:
<CodeBlock lang="typescript" :code="internalDataTS" />

And then the next argument in the array is the data deserialised from the event itself (if it exists).

<script setup lang="ts">
const example1 = `local ReplicatedStorage = game:GetService("ReplicatedStorage")
local zap_deserialiser = require(path.to.deserialiser)

local reliable = ReplicatedStorage:WaitForChild("ZAP_RELIABLE")
local unreliable = ReplicatedStorage:WaitForChild("ZAP_UNRELIABLE")

reliable.OnClientEvent:Connect(function(...)
	local data = zap_deserialiser(reliable, unpack(...))
	print(data)
end)

unreliable.OnClientEvent:Connect(function(...)
	local data = zap_deserialiser(unreliable, unpack(...))
	print(data)
end)`

const returnsLua = `type DecompressedData = { {
    Name: string,
    Arguments: { any },
} }`

const returnsTS = `type DecompressedData = {
    Name: string,
    Arguments: unknown[],
}[]`

const internalDataLua = `type InternalData = {
    EventId: number,
    CallId: number?
}`

const internalDataTS = `interface InternalData {
    EventId: number,
    CallId?: number
}`
</script>